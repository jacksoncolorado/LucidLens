async function l(){const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});return e||null}function u(e){try{return new URL(e).hostname||null}catch{return null}}async function s(){const e=await l(),t=(e==null?void 0:e.url)||null,n=t?u(t):null;return{url:t,domainDisplay:n,tabId:(e==null?void 0:e.id)??null}}class c{static async processWebsite(t){var n;try{const r=await s();return{fullUrl:r.url,host:r.domainDisplay,isSecure:((n=r.url)==null?void 0:n.startsWith("https://"))??!1}}catch(r){return console.error("WebsiteController error:",r),{fullUrl:null,host:null,isSecure:!1}}}}chrome.runtime.onMessage.addListener(async(e,t,n)=>{if((e==null?void 0:e.type)==="popup:ready"){const r=await i();return n(r),!0}});async function i(){return new Promise(e=>{chrome.tabs.query({active:!0,currentWindow:!0},async t=>{const n=t==null?void 0:t[0];if(!n||!n.url){e({fullUrl:null,host:null,isSecure:!1,privacyScore:null,message:"No active tab detected"});return}const r=await c.processWebsite(n.url);e({fullUrl:r.fullUrl,host:r.host,isSecure:r.isSecure,privacyScore:null,message:"Website information loaded"})})})}
